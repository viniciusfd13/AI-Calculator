<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ROI Calculator with GPT</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { margin: 0; padding: 20px; font-family: system-ui, sans-serif; background: #f0f2f5; }
        .calculator { max-width: 1000px; margin: 0 auto; padding: 24px; background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .title { text-align: center; color: #1a73e8; margin-bottom: 24px; }
        .chart-container { margin-top: 24px; }
    </style>
    <script>
        const { useState, useEffect } = React;

        function Calculator() {
            const [data, setData] = useState({
                companyName: '',
                employees: 10,
                hourlyRate: 50,
                hoursPerWeek: 40,
                timeSaving: 20,
                cost: 10000,
            });
            const [gptResponse, setGptResponse] = useState('');
            const [chartData, setChartData] = useState([]);

            const API_KEY = "your-openai-api-key"; // Replace with your OpenAI API key

            function calculate() {
                const annualHours = data.hoursPerWeek * 52;
                const hoursSaved = (annualHours * data.timeSaving / 100) * data.employees;
                const annualSavings = hoursSaved * data.hourlyRate;
                const monthlySavings = annualSavings / 12;
                const roi = ((annualSavings - data.cost) / data.cost * 100);
                const paybackMonths = (data.cost / monthlySavings);

                return {
                    hoursSaved: Math.round(hoursSaved),
                    annualSavings: Math.round(annualSavings),
                    monthlySavings: Math.round(monthlySavings),
                    roi: roi.toFixed(1),
                    paybackPeriod: paybackMonths.toFixed(1),
                };
            }

            const results = calculate();

            useEffect(() => {
                // Update chart data dynamically
                const savings = Array.from({ length: 12 }, (_, i) => results.monthlySavings * (i + 1));
                setChartData(savings);
            }, [results]);

            async function generateGPTResponse() {
                const prompt = `Calculate ROI insights for a company with ${data.employees} employees saving ${data.timeSaving}% of time, at $${data.hourlyRate}/hour.`;
                const response = await fetch("https://api.openai.com/v1/completions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${API_KEY}`,
                    },
                    body: JSON.stringify({
                        model: "text-davinci-003",
                        prompt: prompt,
                        max_tokens: 200,
                    }),
                });
                const result = await response.json();
                setGptResponse(result.choices[0].text.trim());
            }

            return React.createElement('div', { className: 'calculator' },
                React.createElement('h1', { className: 'title' }, 'AI ROI Calculator with GPT'),

                // Inputs
                React.createElement('div', null,
                    React.createElement('label', null, 'Company Name'),
                    React.createElement('input', {
                        type: 'text',
                        value: data.companyName,
                        onChange: (e) => setData({ ...data, companyName: e.target.value }),
                    }),
                    React.createElement('label', null, 'Number of Employees'),
                    React.createElement('input', {
                        type: 'number',
                        value: data.employees,
                        onChange: (e) => setData({ ...data, employees: Number(e.target.value) }),
                    }),
                    React.createElement('label', null, 'Hourly Rate ($)'),
                    React.createElement('input', {
                        type: 'number',
                        value: data.hourlyRate,
                        onChange: (e) => setData({ ...data, hourlyRate: Number(e.target.value) }),
                    }),
                    React.createElement('label', null, 'Hours per Week'),
                    React.createElement('input', {
                        type: 'number',
                        value: data.hoursPerWeek,
                        onChange: (e) => setData({ ...data, hoursPerWeek: Number(e.target.value) }),
                    }),
                    React.createElement('label', null, 'Time Saving (%)'),
                    React.createElement('input', {
                        type: 'number',
                        value: data.timeSaving,
                        onChange: (e) => setData({ ...data, timeSaving: Number(e.target.value) }),
                    }),
                    React.createElement('label', null, 'Implementation Cost ($)'),
                    React.createElement('input', {
                        type: 'number',
                        value: data.cost,
                        onChange: (e) => setData({ ...data, cost: Number(e.target.value) }),
                    }),
                    React.createElement('button', { onClick: generateGPTResponse }, 'Generate GPT Insights'),
                ),

                // Results
                React.createElement('div', null,
                    React.createElement('h2', null, 'Results'),
                    React.createElement('p', null, `Annual Savings: $${results.annualSavings}`),
                    React.createElement('p', null, `ROI: ${results.roi}%`),
                    React.createElement('p', null, `Payback Period: ${results.paybackPeriod} months`),
                ),

                // GPT Insights
                React.createElement('div', null,
                    React.createElement('h2', null, 'GPT Insights'),
                    React.createElement('p', null, gptResponse || 'No insights generated yet.'),
                ),

                // Chart
                React.createElement('div', { className: 'chart-container' },
                    React.createElement('canvas', { id: 'savingsChart' })
                )
            );
        }

        // Render the chart
        useEffect(() => {
            const ctx = document.getElementById('savingsChart');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({ length: 12 }, (_, i) => `Month ${i + 1}`),
                    datasets: [{
                        label: 'Cumulative Savings ($)',
                        data: chartData,
                        borderColor: 'blue',
                        tension: 0.3,
                    }],
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                    },
                },
            });
        }, [chartData]);

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(Calculator));
    </script>
</head>
<body>
    <div id="root"></div>
</body>
</html>
